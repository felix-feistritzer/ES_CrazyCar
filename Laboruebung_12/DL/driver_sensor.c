#include "driver_sensor.h"
#include "hal_adc12.h"
#include <stdint.h>

extern ADC12Com adcCom;

const uint16_t ir_front[512] = {1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1498,1475,1452,1430,1409,1388,1368,1349,1330,1312,1294,1277,1260,1243,1227,1212,1197,1182,1168,1154,1140,1127,1114,1101,1088,1076,1064,1052,1041,1030,1019,1008,998,987,977,967,957,948,938,929,920,911,902,893,884,876,867,859,851,843,835,827,820,812,805,797,790,783,775,768,761,755,748,741,734,728,721,715,709,702,696,690,684,678,672,666,660,655,649,643,638,633,627,622,617,611,606,601,596,591,586,581,577,572,567,563,558,554,549,545,540,536,532,528,524,520,516,512,508,504,500,496,493,489,485,482,478,475,471,468,465,462,458,455,452,449,446,443,440,437,434,431,428,425,423,420,417,414,412,409,407,404,402,399,397,394,392,389,387,385,382,380,378,376,373,371,369,367,365,363,361,358,356,354,352,350,348,346,344,342,340,338,337,335,333,331,329,327,325,323,321,320,318,316,314,312,311,309,307,305,303,302,300,298,296,295,293,291,289,288,286,284,283,281,279,278,276,274,273,271,269,268,266,264,263,261,259,258,256,255,253,252,250,248,247,245,244,242,241,239,238,236,235,233,232,230,229,227,226,225,223,222,220,219,218,216,215,214,212,211,210,208,207,206,205,203,202,201,200,199,197,196,195,194,193,192,191,190,188,187,186,185,184,183,182,181,180,179,178,177,176,175,174,173,173,172,171,170,169,168,167,166,165,164,164,163,162,161,160,159,159,158,157,156,155,154,154,153,152,151,150,149,149,148,147,146,145,144,143,143,142,141,140,139,138,137,136,136,135,134,133,132,131,130,129,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,102,101,100,99,98,97,96,95,94,93,92,91,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,51,50,49,48,47,45,44,43,41,40,38,36,35,33,31,29,27,24,22,20,17,14,11,8,4,1};
const uint16_t ir_left[512]  = {800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,793,785,777,770,762,755,747,740,732,725,718,710,703,696,689,681,674,667,660,653,646,639,632,626,619,612,605,599,592,586,579,573,567,560,554,548,542,536,530,524,518,512,506,501,495,489,484,478,473,468,462,457,452,447,442,437,432,427,422,418,413,408,404,399,395,391,386,382,378,374,370,366,362,358,354,350,346,343,339,335,332,328,325,322,318,315,312,309,305,302,299,296,293,291,288,285,282,279,277,274,272,269,267,264,262,259,257,255,253,250,248,246,244,242,240,238,236,234,232,230,228,226,225,223,221,219,218,216,214,213,211,210,208,207,205,204,202,201,200,198,197,196,194,193,192,190,189,188,187,186,185,183,182,181,180,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,164,163,162,161,160,159,159,158,157,156,155,154,153,153,152,151,150,149,148,148,147,146,145,144,144,143,142,141,141,140,139,138,138,137,136,135,135,134,133,132,132,131,130,129,129,128,127,127,126,125,124,124,123,122,122,121,120,119,119,118,117,117,116,115,115,114,113,113,112,111,111,110,109,109,108,107,107,106,106,105,104,104,103,102,102,101,101,100,99,99,98,98,97,96,96,95,95,94,94,93,93,92,91,91,90,90,89,89,88,88,87,87,86,86,85,85,85,84,84,83,83,82,82,81,81,81,80,80,79,79,79,78,78,77,77,77,76,76,76,75,75,75,74,74,74,73,73,73,72,72,72,71,71,71,71,70,70,70,69,69,69,69,68,68,68,68,67,67,67,67,66,66,66,66,65,65,65,65,64,64,64,64,63,63,63,63,62,62,62,62,61,61,61,60,60,60,60,59,59,59,59,58,58,58,57,57,57,56,56,56,55,55,55,54,54,54,53,53,52,52,52,51,51,50,50,50,49,49,48,48,47,47,46,46,46,45,45,44,44,43,43,42,42,41,41,40,40,39,38,38,37,37,36,36,35,35,34,34,33,33,32,32,31,31,30,30,29,29,29,28,28,27,27,27,26,26,26,26,25,25,25,25,25};
const uint16_t ir_right[512] = {800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,794,785,776,767,758,749,740,731,723,714,706,698,690,682,674,666,658,650,643,635,628,621,613,606,599,592,585,578,572,565,559,552,546,539,533,527,521,515,509,503,497,492,486,480,475,469,464,459,454,448,443,438,433,428,424,419,414,409,405,400,396,391,387,383,379,374,370,366,362,358,354,350,347,343,339,336,332,328,325,321,318,315,311,308,305,302,299,296,292,289,287,284,281,278,275,272,270,267,264,262,259,257,254,252,249,247,245,242,240,238,235,233,231,229,227,225,223,221,219,217,215,213,211,209,208,206,204,202,201,199,197,196,194,192,191,189,188,186,185,183,182,181,179,178,176,175,174,173,171,170,169,168,166,165,164,163,162,161,160,158,157,156,155,154,153,152,151,150,149,148,148,147,146,145,144,143,142,141,141,140,139,138,137,136,136,135,134,133,133,132,131,131,130,129,128,128,127,126,126,125,124,124,123,123,122,121,121,120,120,119,118,118,117,117,116,116,115,114,114,113,113,112,112,111,111,110,110,109,109,108,108,107,107,106,106,105,105,104,104,103,103,102,102,101,101,101,100,100,99,99,98,98,97,97,96,96,96,95,95,94,94,93,93,93,92,92,91,91,90,90,89,89,89,88,88,87,87,87,86,86,85,85,84,84,84,83,83,82,82,81,81,81,80,80,79,79,79,78,78,77,77,77,76,76,75,75,74,74,74,73,73,72,72,72,71,71,70,70,70,69,69,68,68,68,67,67,66,66,66,65,65,64,64,64,63,63,62,62,62,61,61,61,60,60,59,59,59,58,58,57,57,57,56,56,56,55,55,54,54,54,53,53,53,52,52,52,51,51,50,50,50,49,49,49,48,48,48,47,47,47,46,46,46,45,45,45,44,44,44,43,43,43,42,42,42,41,41,41,40,40,40,39,39,39,38,38,38,37,37,37,37,36,36,36,35,35,35,35,34,34,34,33,33,33,32,32,32,32,31,31,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,27,26,26,26,25};


uint16_t Driver_GetFrontDist(void)
{
    return ir_front[adcCom.ADCBuffer[2] >> 3];
}

uint16_t Driver_GetLeftDist(void)
{
    return ir_left[adcCom.ADCBuffer[1] >> 3];
}

uint16_t Driver_GetRightDist(void)
{
    return ir_right[adcCom.ADCBuffer[0] >> 3];
}
